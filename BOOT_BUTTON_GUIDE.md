# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–æ—á–Ω—ã–º –≤–æ–¥–æ–Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª–µ–º —Å WiFi —Å–µ—Å—Å–∏—è–º–∏

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä

### –¢—Ä–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ BOOT

1. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É BOOT 3 —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥** (—Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –Ω–µ –±–æ–ª–µ–µ 1 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –Ω–∞–∂–∞—Ç–∏—è–º–∏)
2. –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å—Ç–∏—Ç WiFi —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ "WaterHeater" (–ø–∞—Ä–æ–ª—å: 12345678)
3. WiFi —Å–µ—Å—Å–∏—è –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω–∞ **15 –º–∏–Ω—É—Ç**, –∑–∞—Ç–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ç–∏ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ –∞–¥—Ä–µ—Å–µ **192.168.4.1**

### –≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∏–π —Ä–µ–∂–∏–º

- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: WiFi –æ—Ç–∫–ª—é—á–µ–Ω, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–µ–º —Ä–µ–∂–∏–º–µ
- **WiFi –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É**: —Ç—Ä–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ BOOT
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ**: —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç WiFi –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ**: –≤ —Ä–µ–∂–∏–º–µ –ø–æ–∫–æ—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–∏–Ω–∏–º—É–º —ç–Ω–µ—Ä–≥–∏–∏

## üîß –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –î–µ—Ç–µ–∫—Ç–æ—Ä –∫–Ω–æ–ø–∫–∏ BOOT (`boot_button.h/cpp`)

- –î–µ—Ç–µ–∫—Ü–∏—è —Ç—Ä–æ–π–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ BOOT
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—Ä–µ–±–µ–∑–≥–∞ (50–º—Å)
- –¢–∞–π–º–∞—É—Ç –º–µ–∂–¥—É –Ω–∞–∂–∞—Ç–∏—è–º–∏ (1 —Å–µ–∫—É–Ω–¥–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è

### 2. WiFi —Å–µ—Å—Å–∏–∏ (`web_server.h/cpp`)

- –†–µ–∂–∏–º —Å–µ—Å—Å–∏–π –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø–æ —Ç—Ä–æ–π–Ω–æ–º—É –Ω–∞–∂–∞—Ç–∏—é
- –¢–∞–π–º–∞—É—Ç —Å–µ—Å—Å–∏–∏ 15 –º–∏–Ω—É—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ WiFi

### 3. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.h`)

- –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–Ω–æ–ø–∫–∏ BOOT
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã WiFi —Å–µ—Å—Å–∏–π
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—Ç—á–∏–∫–∞ –ø–æ—Ç–æ–∫–∞
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –∞–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: —Å–±—Ä–æ—Å –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–õ–æ–≥–∏**: –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /status` - —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- `GET /config` - —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `POST /config` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `POST /calibrate` - –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –¥–∞—Ç—á–∏–∫–∞ –ø–æ—Ç–æ–∫–∞
- `POST /emergency` - –∞–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- `POST /reset-config` - —Å–±—Ä–æ—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `POST /terminal` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

## üíª –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```cpp
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è WiFi —Å–µ—Å—Å–∏–∏
if (webServer.isWiFiSessionActive()) {
    unsigned long timeLeft = webServer.getSessionTimeLeft();
    Serial.println("WiFi —Å–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞, –æ—Å—Ç–∞–ª–æ—Å—å: " + String(timeLeft/1000) + " —Å–µ–∫");
}

// –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ WiFi —Å–µ—Å—Å–∏–∏
webServer.startWiFiSession();

// –†—É—á–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ WiFi —Å–µ—Å—Å–∏–∏
webServer.stopWiFiSession();

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –∫–Ω–æ–ø–∫–∏
if (bootButton.shouldStartWiFiSession()) {
    webServer.startWiFiSession();
    bootButton.reset();
}
```

## üìä –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
[–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞]
        ‚Üì
[WiFi –æ—Ç–∫–ª—é—á–µ–Ω - —ç–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏]
        ‚Üì
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç BOOT 3 —Ä–∞–∑–∞]
        ‚Üì
[WiFi —Å–µ—Å—Å–∏—è –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ 15 –º–∏–Ω—É—Ç]
        ‚Üì
[–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ 192.168.4.1]
        ‚Üì
[–ß–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç WiFi –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è]
        ‚Üì
[–°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∏–π —Ä–µ–∂–∏–º]
```

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ**: WiFi –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
2. **–£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: —Ç—Ä–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: —Å–µ—Å—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç
4. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
5. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ EEPROM
6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –∑–∞—â–∏—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
7. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞

- **SOLID**: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏
- **KISS**: –ø—Ä–æ—Å—Ç–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **DRY**: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **YAGNI**: —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

## üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–í Serial Monitor –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
–î–µ—Ç–µ–∫—Ç–æ—Ä –∫–Ω–æ–ø–∫–∏ BOOT –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
–¢—Ä–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç WiFi —Å–µ—Å—Å–∏—é –Ω–∞ 15 –º–∏–Ω—É—Ç
–ù–∞–∂–∞—Ç–∏–µ #1
–ù–∞–∂–∞—Ç–∏–µ #2
–ù–∞–∂–∞—Ç–∏–µ #3
=== –¢–†–û–ô–ù–û–ï –ù–ê–ñ–ê–¢–ò–ï –û–ë–ù–ê–†–£–ñ–ï–ù–û ===
–ó–∞–ø—Ä–æ—Å –Ω–∞ –∑–∞–ø—É—Å–∫ WiFi —Å–µ—Å—Å–∏–∏
================================
=== WiFi –°–ï–°–°–ò–Ø –ó–ê–ü–£–©–ï–ù–ê ===
IP address: 192.168.4.1
SSID: WaterHeater
–ü–∞—Ä–æ–ª—å: 12345678
–°–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞ 15 –º–∏–Ω—É—Ç
========================
```
